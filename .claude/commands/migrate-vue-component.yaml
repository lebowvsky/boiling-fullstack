---
name: migrate-vue-component
description: Migre un composant option API Vue en composant composition API Typescript <script setup lang="ts" >
created: 2025-12-12T15:19:27.570929
---

# Command: migrate-vue-component

## Parameters
parameters:
  - name: component_path
    type: string
    required: true
    description: Path to the Vue component file to migrate (e.g., src/js/components/MyComponent.vue)
    default: null

## Workflow
workflow:
  # Step 1: Analyze the component structure
  - step: analyze_component
    agent: vue-developer
    description: Analyze the Options API component and identify all properties to migrate
    prompt: |
      Analyze the Vue component at {component_path}.

      Identify and document:
      1. All props definitions
      2. Data properties
      3. Computed properties
      4. Methods
      5. Lifecycle hooks (mounted, created, beforeDestroy, etc.)
      6. Watchers
      7. Component dependencies and imports
      8. Emits used
      9. Refs used
      10. Any Vuex/Pinia store usage

      Provide a detailed analysis of the component structure that will guide the migration.
      DO NOT migrate yet, just analyze and document.
    output_variable: component_analysis
    on_error: stop
    retry_count: 0

  # Step 2: Migrate to Composition API with TypeScript
  - step: migrate_to_composition_api
    agent: vue-developer
    description: Convert the component from Options API to Composition API with TypeScript
    prompt: |
      Based on this component analysis:
      {component_analysis}

      Migrate the Vue component at {component_path} from Options API to Composition API with TypeScript.

      Requirements:
      - Use <script setup lang="ts">
      - Convert all props with proper TypeScript types (use interface or type for complex props)
      - Convert data() to ref() or reactive()
      - Convert computed properties to computed()
      - Convert methods to regular functions
      - Convert lifecycle hooks to their Composition API equivalents (onMounted, onBeforeUnmount, etc.)
      - Convert watchers to watch() or watchEffect()
      - Use defineProps, defineEmits for props and emits
      - Use defineExpose if needed for template refs
      - Maintain all functionality and logic
      - Add proper TypeScript types for all variables and function parameters
      - Keep the template and style sections unchanged unless necessary

      IMPORTANT: Ensure the migrated component maintains 100% feature parity with the original.
    output_variable: migrated_component
    on_error: stop

  # Step 3: Review the migrated code
  - step: review_migration
    agent: code-reviewer
    description: Review the migrated component for correctness and best practices
    prompt: |
      Review this Vue component migration from Options API to Composition API with TypeScript.

      Original analysis:
      {component_analysis}

      Migrated component location: {component_path}

      Check for:
      1. All Options API features correctly converted to Composition API
      2. Proper TypeScript types and interfaces
      3. Correct usage of ref, reactive, computed, watch
      4. Lifecycle hooks properly converted
      5. Props and emits properly defined
      6. No missing functionality from the original component
      7. Code follows Vue 3 Composition API best practices
      8. No TypeScript errors or warnings
      9. Proper reactivity maintained
      10. Performance considerations

      Provide a detailed review with any issues found or improvements needed.
      If issues are found, they should be fixed.
    output_variable: review_result
    on_error: stop

  # Step 4: Run tests and verify (conditional)
  - step: verify_migration
    agent: test-runner-fixer
    description: Run tests for the migrated component and fix any failures
    prompt: |
      The component at {component_path} has been migrated to Composition API with TypeScript.

      Run all tests related to this component and fix any failures.
      Look for test files matching patterns:
      - **/*.spec.js
      - **/*.test.js
      - __tests__/** directories

      If tests fail due to the migration, update them to work with the Composition API version.
    output_variable: test_result
    on_error: continue

## Output
output:
  format: markdown
  variables:
    - component_analysis
    - review_result
    - test_result
  save_to: .claude/command-outputs/migrate-vue-component-{timestamp}.md
